{{ $contextPostfix := .contextPostfix }}
{{ $pickerId := print .id "-" .contextPostfix}}
{{ $selectors := split .selectors "," }}

<input class="color-picker" type="color" id="{{ $pickerId }}" value="{{ .color }}">
<script>
    var colorPicker = document.querySelector("#{{ $pickerId }}");
    setupColorPicker(colorPicker, (event) => {
        {{ range $selectors }}
        setStyle(event, document.querySelector("#{{ . }}-{{ $contextPostfix }}"), '--box-color');
        {{ end }}
    });

    {{ range $selectors }}
    setStyleProperty(colorPicker.value, document.querySelector("#{{ . }}-{{ $contextPostfix }}"), '--box-color');
    {{ end }}
</script>